<template>
  <div class="legal-page">
    <div class="legal-container">
      <div class="legal-sidebar">
        <ul class="legal-nav">
          <li :class="{ active: currentTab === 'terms' }" @click="currentTab = 'terms'">
            {{ getNavLabel('terms') }}
          </li>
          <li :class="{ active: currentTab === 'privacy' }" @click="currentTab = 'privacy'">
            {{ getNavLabel('privacy') }}
          </li>
          <li :class="{ active: currentTab === 'dpa' }" @click="currentTab = 'dpa'">
            {{ getNavLabel('dpa') }}
          </li>
          <li :class="{ active: currentTab === 'cookies' }" @click="currentTab = 'cookies'">
            Cookiepolicy
          </li>
        </ul>
        <div class="lang-switch">
          <button 
            :class="{ active: $i18n.locale === 'sv' }" 
            @click="$i18n.locale = 'sv'"
          >üá∏üá™ Svenska</button>
          <button 
            :class="{ active: $i18n.locale === 'en' }" 
            @click="$i18n.locale = 'en'"
          >üá¨üáß English</button>
        </div>
        <button class="back-btn" @click="$router.push('/')">‚Üê {{ $i18n.locale === 'sv' ? 'Tillbaka till Hem' : 'Back to Home' }}</button>
      </div>

      <div class="legal-content">
        <!-- Terms of Service -->
        <div v-if="currentTab === 'terms'" class="legal-section">
          <h1>{{ $i18n.locale === 'sv' ? 'Allm√§nna Villkor' : 'Terms of Service' }}</h1>
          <p class="last-updated">{{ $i18n.locale === 'sv' ? 'G√§ller fr√•n' : 'Effective from' }}: 2026-02-18 | Version: 1.0</p>
          
          <div v-if="$i18n.locale === 'sv'" class="legal-text">
            <h2>1. Om Orient</h2>
            <p>Orient √§r ett molnbaserat bokf√∂ringssystem utvecklat f√∂r ideella f√∂reningar och mindre organisationer i Sverige.</p>
            <p>Tj√§nsten m√∂jligg√∂r bland annat:</p>
            <ul>
                <li>L√∂pande bokf√∂ring</li>
                <li>Verifikationshantering</li>
                <li>SIE-export</li>
                <li>Hantering av konton och transaktioner</li>
                <li>Skapande av Swish-betalningsf√∂rfr√•gningar</li>
            </ul>
            <p>Orient tillhandah√•ller ett tekniskt system och l√§mnar inte redovisningsr√•dgivning.</p>

            <h2>2. Parter</h2>
            <p>Dessa villkor g√§ller mellan:</p>
            <p><strong>Orient (leverant√∂ren)</strong><br>
            Organisationsnummer: [DITT ORGNR]<br>
            E-post: [EMAIL]</p>
            <p>och</p>
            <p>Den organisation som registrerar konto i systemet (‚ÄúF√∂reningen‚Äù)</p>

            <h2>3. Tj√§nstens anv√§ndning</h2>
            <p>F√∂reningen ansvarar f√∂r:</p>
            <ul>
                <li>Att bokf√∂ringen √§r korrekt och fullst√§ndig</li>
                <li>Att uppgifter som registreras √§r riktiga</li>
                <li>Att Swish-avtal √§r korrekt uppr√§ttat med bank</li>
                <li>Att organisationsnummer √§r korrekt angivet</li>
                <li>Att beh√∂riga anv√§ndare utses</li>
            </ul>
            <p>Orient ansvarar f√∂r:</p>
            <ul>
                <li>Tillhandah√•llande av systemet</li>
                <li>Rimlig teknisk tillg√§nglighet</li>
                <li>S√§ker lagring enligt g√§llande lag</li>
            </ul>

            <h2>4. Bokf√∂ring och lagkrav</h2>
            <p>Orient √§r utformat f√∂r att st√∂dja bokf√∂ringsskyldiga organisationer enligt Bokf√∂ringslagen (1999:1078).</p>
            <p>F√∂reningen √§r ensam ansvarig f√∂r att bokf√∂ringen uppfyller lagens krav.</p>
            <p>Orient m√∂jligg√∂r export i SIE-format.</p>
            <p>Bokf√∂ringsdata sparas i minst 7 √•r i enlighet med lag.</p>

            <h2>5. Swish</h2>
            <p>Orient hanterar inte kundmedel.</p>
            <p>Alla betalningar sker direkt mellan F√∂reningens bank och betalaren.</p>
            <p>Orient √§r inte betaltj√§nstleverant√∂r och omfattas inte av tillst√•ndsplikt enligt lagen om betaltj√§nster.</p>
            <p>F√∂reningen ansvarar f√∂r att inneha giltigt avtal om Swish f√∂r Handel.</p>

            <h2>6. Abonnemang och betalning</h2>
            <p>Tj√§nsten tillhandah√•lls genom abonnemang.</p>
            <p>Avgift debiteras m√•nadsvis eller √•rsvis.</p>
            <p>Upps√§gningstid: 30 dagar.</p>
            <p>Ingen √•terbetalning sker f√∂r p√•b√∂rjad period.</p>

            <h2>7. Ansvarsbegr√§nsning</h2>
            <p>Orient ansvarar inte f√∂r:</p>
            <ul>
                <li>Indirekt skada</li>
                <li>F√∂rlorad vinst</li>
                <li>F√∂rlust till f√∂ljd av felaktig bokf√∂ring</li>
            </ul>
            <p>Orients totala ansvar √§r begr√§nsat till vad F√∂reningen betalat under de senaste 12 m√•naderna.</p>

            <h2>8. Upps√§gning</h2>
            <p>F√∂reningen kan s√§ga upp tj√§nsten n√§r som helst.</p>
            <p>Vid upps√§gning ges m√∂jlighet att exportera data.</p>
            <p>Bokf√∂ringsdata kan sparas enligt lagkrav √§ven efter upps√§gning.</p>

            <h2>9. Till√§mplig lag</h2>
            <p>Svensk lag g√§ller.</p>
            <p>Tvister avg√∂rs i svensk domstol.</p>
          </div>

          <div v-else class="legal-text">
            <h2>1. About Orient</h2>
            <p>Orient is a cloud-based bookkeeping system designed for Swedish nonprofit organizations and small associations.</p>
            <p>The Service enables:</p>
            <ul>
                <li>Bookkeeping</li>
                <li>Voucher management</li>
                <li>SIE export</li>
                <li>Account and transaction management</li>
                <li>Swish payment request creation</li>
            </ul>
            <p>Orient provides a technical platform and does not offer accounting advice.</p>

            <h2>2. Parties</h2>
            <p>These terms apply between:</p>
            <p><strong>Orient (the Provider)</strong><br>
            Company registration number: [YOUR ORGNR]<br>
            Email: [EMAIL]</p>
            <p>and</p>
            <p>The organization registering an account (‚Äúthe Organization‚Äù)</p>

            <h2>3. Use of the Service</h2>
            <p>The Organization is responsible for:</p>
            <ul>
                <li>Accuracy of bookkeeping</li>
                <li>Correct data entry</li>
                <li>Maintaining a valid Swish merchant agreement</li>
                <li>Providing correct organization number</li>
                <li>Assigning authorized users</li>
            </ul>
            <p>Orient is responsible for:</p>
            <ul>
                <li>Providing the platform</li>
                <li>Reasonable technical availability</li>
                <li>Secure data storage</li>
            </ul>

            <h2>4. Bookkeeping Compliance</h2>
            <p>The Service is designed to support compliance with the Swedish Bookkeeping Act (1999:1078).</p>
            <p>The Organization remains solely responsible for legal compliance.</p>
            <p>Data can be exported in SIE format.</p>
            <p>Accounting data is retained for at least 7 years.</p>

            <h2>5. Swish Payments</h2>
            <p>Orient does not handle or hold funds.</p>
            <p>All payments are made directly between the Organization‚Äôs bank and the payer.</p>
            <p>Orient is not a payment service provider.</p>
            <p>The Organization is responsible for maintaining a valid Swish Commerce agreement.</p>

            <h2>6. Subscription & Payment</h2>
            <p>The Service is provided on a subscription basis.</p>
            <p>Fees are charged monthly or annually.</p>
            <p>Notice period: 30 days.</p>
            <p>No refunds for commenced subscription periods.</p>

            <h2>7. Limitation of Liability</h2>
            <p>Orient is not liable for:</p>
            <ul>
                <li>Indirect damages</li>
                <li>Loss of profit</li>
                <li>Accounting errors made by the Organization</li>
            </ul>
            <p>Total liability is limited to fees paid during the previous 12 months.</p>

            <h2>8. Termination</h2>
            <p>The Organization may terminate at any time.</p>
            <p>Data export is available before termination.</p>
            <p>Bookkeeping data may be retained as required by law.</p>
          </div>
        </div>

        <!-- Privacy Policy -->
        <div v-if="currentTab === 'privacy'" class="legal-section">
          <h1>{{ $i18n.locale === 'sv' ? 'Integritetspolicy' : 'Privacy Policy' }}</h1> 
          <p class="last-updated">{{ $i18n.locale === 'sv' ? 'Senast uppdaterad' : 'Last updated' }}: 2026-02-18</p>

          <div v-if="$i18n.locale === 'sv'" class="legal-text">
            <h2>1. Roller</h2>
            <p>F√∂reningen √§r personuppgiftsansvarig.<br>
            Orient √§r personuppgiftsbitr√§de.</p>

            <h2>2. Vilka uppgifter behandlas</h2>
            <ul>
                <li>Namn</li>
                <li>E-postadress</li>
                <li>Hashat l√∂senord</li>
                <li>Organisationskoppling</li>
                <li>IP-adress</li>
                <li>Swish-relaterade uppgifter</li>
                <li>I framtiden: uppladdade kvitton</li>
            </ul>

            <h2>3. √Ñndam√•l</h2>
            <p>Personuppgifter behandlas f√∂r att:</p>
            <ul>
                <li>Tillhandah√•lla tj√§nsten</li>
                <li>S√§kerst√§lla s√§ker inloggning</li>
                <li>Uppfylla bokf√∂ringskrav</li>
            </ul>

            <h2>4. Lagring</h2>
            <p>Data lagras inom EU.</p>
            <p>√ñverf√∂ring sker via krypterad anslutning (HTTPS).</p>
            <p>Swish-certifikat lagras krypterat.</p>

            <h2>5. R√§ttigheter</h2>
            <p>Registrerade har r√§tt att:</p>
            <ul>
                <li>Beg√§ra registerutdrag</li>
                <li>Beg√§ra r√§ttelse</li>
                <li>Beg√§ra begr√§nsning</li>
            </ul>
            <p>Bokf√∂ringsdata kan inte raderas under lagstadgad lagringstid.</p>
          </div>
          
          <div v-else class="legal-text">
            <h2>Roles</h2>
            <p>The Organization is the data controller.<br>
            Orient is the data processor.</p>

            <h2>Data Processed</h2>
            <ul>
                <li>Name</li>
                <li>Email address</li>
                <li>Hashed password</li>
                <li>Organization membership</li>
                <li>IP address</li>
                <li>Swish-related data</li>
                <li>Future: uploaded receipts</li>
            </ul>

            <h2>Purpose</h2>
            <p>Data is processed to:</p>
            <ul>
                <li>Provide the Service</li>
                <li>Ensure secure authentication</li>
                <li>Comply with bookkeeping laws</li>
            </ul>

            <h2>Storage</h2>
            <p>Data is stored within the EU.</p>
            <p>Encrypted transmission (HTTPS).</p>
            <p>Encrypted storage of Swish certificates.</p>

            <h2>Rights</h2>
            <p>Data subjects may request:</p>
            <ul>
                <li>Access</li>
                <li>Rectification</li>
                <li>Restriction of processing</li>
            </ul>
            <p>Accounting data cannot be erased during statutory retention period.</p>
          </div>
        </div>

        <!-- DPA -->
        <div v-if="currentTab === 'dpa'" class="legal-section">
           <h1>{{ $i18n.locale === 'sv' ? 'Personuppgiftsbitr√§desavtal (PUB)' : 'Data Processing Agreement (DPA)' }}</h1>
           <p class="last-updated">{{ $i18n.locale === 'sv' ? 'Senast uppdaterad' : 'Last updated' }}: 2026-02-18</p>
           
           <div v-if="$i18n.locale === 'sv'" class="legal-text">
             <p>Orient behandlar personuppgifter enligt instruktion fr√•n F√∂reningen.</p>
             
             <h2>S√§kerhets√•tg√§rder</h2>
             <ul>
                 <li>Krypterad √∂verf√∂ring</li>
                 <li>Krypterad lagring av k√§nsliga uppgifter</li>
                 <li>Rollbaserad √•tkomst</li>
                 <li>Loggning av √•tkomst</li>
             </ul>

             <h2>Underbitr√§den</h2>
             <ul>
                 <li>Vercel (hosting)</li>
                 <li>Databasleverant√∂r (Vercel Postgres)</li>
             </ul>

             <p>Orient rapporterar personuppgiftsincidenter inom 72 timmar.</p>
           </div>
           
           <div v-else class="legal-text">
             <p>Orient processes personal data only on documented instructions.</p>
             
             <h2>Security Measures</h2>
             <ul>
                 <li>Encrypted communication</li>
                 <li>Encrypted sensitive storage</li>
                 <li>Role-based access control</li>
                 <li>Audit logging</li>
             </ul>

             <h2>Sub-processors</h2>
             <ul>
                 <li>Vercel (hosting)</li>
                 <li>Database provider (Vercel Postgres)</li>
             </ul>

             <p>Data breaches are reported within 72 hours.</p>
           </div>
        </div>

        <!-- Cookie Policy -->
        <div v-if="currentTab === 'cookies'" class="legal-section">
            <h1>Cookiepolicy</h1>
            
            <div v-if="$i18n.locale === 'sv'" class="legal-text">
                <p>Orient anv√§nder endast n√∂dv√§ndiga cookies f√∂r:</p>
                <ul>
                    <li>Autentisering (session cookie)</li>
                    <li>S√§ker inloggning</li>
                </ul>
                <p>Inga marknadsf√∂rings- eller sp√•rningscookies anv√§nds.</p>
            </div>
            
            <div v-else class="legal-text">
                <p>Orient uses only essential cookies for:</p>
                <ul>
                    <li>Session authentication</li>
                    <li>Secure login</li>
                </ul>
                <p>No marketing or tracking cookies are used.</p>
            </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'Legal',
  data() {
    return {
      currentTab: 'terms'
    }
  },
  mounted() {
    // Check URL query param to open specific tab if needed
    if (this.$route.query.tab) {
      this.currentTab = this.$route.query.tab
    }
  },
  methods: {
    getNavLabel(tab) {
      if (this.$i18n.locale === 'sv') {
        const labels = {
          terms: 'Anv√§ndarvillkor',
          privacy: 'Integritetspolicy',
          dpa: 'Personuppgiftsbitr√§desavtal',
          cookies: 'Cookiepolicy'
        }
        return labels[tab] || tab
      } else {
         const labels = {
          terms: 'Terms of Service',
          privacy: 'Privacy Policy',
          dpa: 'Data Processing Agreement',
          cookies: 'Cookie Policy'
        }
        return labels[tab] || tab
      }
    }
  }
}
</script>

<style scoped>
.legal-page {
  padding: 2rem;
  background-color: #f8fafc;
  min-height: 100vh;
}

.legal-container {
  display: flex;
  max-width: 1200px;
  margin: 0 auto;
  gap: 2rem;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  min-height: 600px;
}

.legal-sidebar {
  width: 300px;
  background: #f1f5f9;
  padding: 2rem;
  display: flex;
  flex-direction: column;
}

.legal-nav {
  list-style: none;
  padding: 0;
  margin: 0;
  margin-bottom: 2rem;
}

.legal-nav li {
  padding: 1rem;
  cursor: pointer;
  border-radius: 8px;
  margin-bottom: 0.5rem;
  color: var(--text-dark);
  font-weight: 500;
  transition: all 0.2s;
}

.legal-nav li:hover {
  background: white;
  color: var(--primary-dark);
}

.legal-nav li.active {
  background: white;
  color: var(--primary-dark);
  font-weight: 700;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  border-left: 4px solid var(--primary-dark);
}

.lang-switch {
  margin-bottom: auto;
  display: flex;
  gap: 0.5rem;
}

.lang-switch button {
  flex: 1;
  padding: 0.5rem;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  font-size: 0.85rem;
  color: #64748b;
}

.lang-switch button.active {
  background: #e0f2fe;
  color: var(--primary-dark);
  border-color: #bae6fd;
  font-weight: 600;
}

.legal-content {
  flex: 1;
  padding: 3rem;
  overflow-y: auto;
}

.legal-section h1 {
  margin-top: 0;
  color: var(--primary-dark);
  font-size: 2rem;
}

.last-updated {
  color: #64748b;
  font-size: 0.9rem;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #e2e8f0;
}

.legal-text h2 {
  color: #334155;
  font-size: 1.25rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.legal-text p {
  color: #475569;
  line-height: 1.7;
  margin-bottom: 1rem;
}

.legal-text ul {
  color: #475569;
  line-height: 1.7;
  margin-bottom: 1rem;
  padding-left: 1.5rem;
}

.back-btn {
  background: none;
  border: none;
  color: #64748b;
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0;
  margin-top: 2rem;
}

.back-btn:hover {
  color: var(--primary-dark);
}

@media (max-width: 768px) {
  .legal-container {
    flex-direction: column;
  }
  
  .legal-sidebar {
    width: 100%;
    padding: 1rem;
  }
}
</style>